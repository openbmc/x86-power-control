{
  "comments": [
    {
      "key": {
        "uuid": "8f42f560_436f488c",
        "filename": "power-control-x86/src/power_control.cpp",
        "patchSetId": 1
      },
      "lineNbr": 497,
      "author": {
        "id": 1000276
      },
      "writtenOn": "2021-06-02T22:09:09Z",
      "side": 1,
      "message": "x86-power-control doesn\u0027t feel like the right place for this change.  I think it would make more sense to add a match for the CurrentHostState property in the host watchdog service and start and stop the timer based on that match.  You can find an example match in currentHostStateMonitor().\n\nIf x86-power-control is really the best place, we can put it in.",
      "revId": "6ab54f177328186c84b2fd85f151e75f7396f151",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "df91139f_1c60c994",
        "filename": "power-control-x86/src/power_control.cpp",
        "patchSetId": 1
      },
      "lineNbr": 497,
      "author": {
        "id": 1000357
      },
      "writtenOn": "2021-06-03T14:07:56Z",
      "side": 1,
      "message": "It\u0027s a good question, so far I just think that stop host watchdog timer after sending power off/cycle/reset request, thus I add it to x86-power-control. Maybe other reviewers could give us the suggestion about it. Anyway, I still submit the update first and it changes to handle stop watchdog timer in currentHostStateMonitor() by your advice.",
      "parentUuid": "8f42f560_436f488c",
      "revId": "6ab54f177328186c84b2fd85f151e75f7396f151",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "06c7184c_83ca5773",
        "filename": "power-control-x86/src/power_control.cpp",
        "patchSetId": 1
      },
      "lineNbr": 497,
      "author": {
        "id": 1000388
      },
      "writtenOn": "2021-06-03T19:06:48Z",
      "side": 1,
      "message": "Hmm, I think the host watchdog should be there in case we want to try to power it up when the host goes down unexpectedly - wouldn\u0027t basing it off of \"currentHostStatusMonitor\" defeat the purpose of the watchdog?\n\nWe want to only turn the watchdog off when we mean to turn off the host - ie. when the BMC instructs the host to turn itself off, so I think this living in x86-power-control code makes sense to me.",
      "parentUuid": "df91139f_1c60c994",
      "revId": "6ab54f177328186c84b2fd85f151e75f7396f151",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "927c88fb_ae85e3b4",
        "filename": "power-control-x86/src/power_control.cpp",
        "patchSetId": 1
      },
      "lineNbr": 518,
      "author": {
        "id": 1000276
      },
      "writtenOn": "2021-06-02T22:09:09Z",
      "side": 1,
      "message": "This would be better in currentHostStateMonitor() where other things like the POH counter are already handled based on the host state.\n\nAlso, does anything ever start the host watchdog timer?",
      "revId": "6ab54f177328186c84b2fd85f151e75f7396f151",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b4c6abb5_96114b0c",
        "filename": "power-control-x86/src/power_control.cpp",
        "patchSetId": 1
      },
      "lineNbr": 518,
      "author": {
        "id": 1000357
      },
      "writtenOn": "2021-06-03T14:07:56Z",
      "side": 1,
      "message": "I follow your suggestion and move to currentHostStateMonitor() to handle it.\n\nAnd I think starting the host watchdog timer by the host usually.",
      "parentUuid": "927c88fb_ae85e3b4",
      "revId": "6ab54f177328186c84b2fd85f151e75f7396f151",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    }
  ]
}